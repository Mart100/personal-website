import{A as y,r as v,d as x,h as e,H as C,N as a,O as u,I as c,P as g,e as j,_ as P,g as I,t as A,L as T,Q as E,D as V,f as N,z as S,F as U,G as D}from"#entry";import{I as L}from"./BZjnSQNG.js";import{f as B}from"./B9SBw2-U.js";import"./_qTfh9x3.js";const F={class:"edit-project"},O=["src"],$=y({__name:"EditProject",props:{project:{}},emits:["close","update"],setup(l,{emit:p}){const r=l;let s=v(r.project.tags.join(", ")),i=v(r.project.techStack.join(", ")),d=v(r.project.created.toISOString().split("T")[0]);function b(){console.log("submitting form"),r.project.tags=s.value.split(",").map(n=>n.trim()),r.project.techStack=i.value.split(",").map(n=>n.trim()),r.project.created=new Date(d.value),m("update",r.project),k()}const m=p;function k(){m("close")}return(n,t)=>(j(),x("div",{class:"background",onClick:C(k,["self"])},[e("div",F,[t[17]||(t[17]=e("h1",null,"Edit Project",-1)),e("form",{onSubmit:C(b,["prevent"])},[e("div",null,[t[8]||(t[8]=e("label",{for:"title"},"Title: ",-1)),a(e("input",{type:"text",id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>l.project.title=o)},null,512),[[u,l.project.title]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"image"},"Image: ",-1)),a(e("input",{type:"text",id:"image","onUpdate:modelValue":t[1]||(t[1]=o=>l.project.image=o)},null,512),[[u,l.project.image]]),e("img",{class:"image-preview",src:l.project.image},null,8,O)]),e("div",null,[t[10]||(t[10]=e("label",{for:"created"},"Created: ",-1)),a(e("input",{type:"date",id:"created","onUpdate:modelValue":t[2]||(t[2]=o=>g(d)?d.value=o:d=o)},null,512),[[u,c(d)]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"link"},"Link: ",-1)),a(e("input",{type:"text",id:"link","onUpdate:modelValue":t[3]||(t[3]=o=>l.project.link=o)},null,512),[[u,l.project.link]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"code"},"Code: ",-1)),a(e("input",{type:"text",id:"code","onUpdate:modelValue":t[4]||(t[4]=o=>l.project.code=o)},null,512),[[u,l.project.code]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"description"},"Description: ",-1)),a(e("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=o=>l.project.description=o)},null,512),[[u,l.project.description]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"skills"},"Tech Stack: ",-1)),a(e("input",{type:"text",id:"skills","onUpdate:modelValue":t[6]||(t[6]=o=>g(i)?i.value=o:i=o)},null,512),[[u,c(i)]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"tags"},"Tags: ",-1)),a(e("input",{type:"text",id:"tags","onUpdate:modelValue":t[7]||(t[7]=o=>g(s)?s.value=o:s=o)},null,512),[[u,c(s)]])]),t[16]||(t[16]=e("button",{type:"submit"},"Submit",-1))],32)])]))}}),M=Object.assign(P($,[["__scopeId","data-v-bb987e3a"]]),{__name:"AdminEditProject"}),z={class:"title"},G=y({__name:"Project",props:{project:{}},emits:["edit"],setup(l,{emit:p}){const r=l,s=p;function i(){s("edit",r.project)}return(d,b)=>{const m=L;return j(),x("div",{class:"project",onClick:i},[e("h3",z,A(l.project.title),1),I(m,{src:l.project.image},null,8,["src"])])}}}),H=Object.assign(P(G,[["__scopeId","data-v-0e6ec286"]]),{__name:"AdminProject"}),Q={class:"top"},R={class:"search"},q={class:"projects"},J=y({__name:"projects",async setup(l){let p,r;const s=([p,r]=T(()=>B()),p=await p,r(),p);s.value=s.value.sort((n,t)=>t.score-n.score);let i=v(null);const d=v("");function b(n){i.value=n}async function m(n){s.value=s.value.map(o=>o.id===n.id?n:o),console.log("updating project"),console.log(n);const t=await $fetch("/api/admin/project/update",{method:"put",headers:{"Content-Type":"application/json"},body:n});console.log(t),t?.statusCode===200?console.log("Project updated successfully"):console.error("Failed to update project",t)}const k=E(()=>s.value.filter(n=>n.title.toLowerCase().includes(d.value.toLowerCase())));return(n,t)=>{const o=M,w=H;return j(),x(U,null,[c(i)?(j(),V(o,{key:0,onClose:t[0]||(t[0]=f=>g(i)?i.value=null:i=null),onUpdate:m,project:{...c(i)}},null,8,["project"])):N("",!0),e("div",Q,[t[3]||(t[3]=e("h1",null,"All Projects:",-1)),t[4]||(t[4]=S()),t[5]||(t[5]=e("button",null,"Add Project",-1)),e("div",R,[t[2]||(t[2]=S(" Search: ",-1)),a(e("input",{type:"text",placeholder:"Search projects","onUpdate:modelValue":t[1]||(t[1]=f=>g(d)?d.value=f:null)},null,512),[[u,c(d)]])])]),e("div",q,[(j(!0),x(U,null,D(c(k),f=>(j(),V(w,{onEdit:b,key:f.title,project:f},null,8,["project"]))),128))])],64)}}}),Z=P(J,[["__scopeId","data-v-fd9e0fd7"]]);export{Z as default};
